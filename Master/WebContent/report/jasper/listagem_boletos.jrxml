<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="listagem_boletos" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
	<property name="ireport.zoom" value="1.6105100000000008"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="CONTEXT_PATH" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["C:/Users/marcelo/Documents/sistemas/master/master.com/WebContent/report/"]]></defaultValueExpression>
	</parameter>
	<parameter name="TITULO" class="java.lang.String" isForPrompting="false">
		<defaultValueExpression><![CDATA["LISTAGEM DE BOLETOS EMITIDOS"]]></defaultValueExpression>
	</parameter>
	<parameter name="CONEXAO_EXTERNA" class="java.sql.Connection" isForPrompting="false">
		<defaultValueExpression><![CDATA[$P{REPORT_CONNECTION}]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT b.codigo, b.vencimento, b.emissao, f.nome, j.fantasia,
	b.status, i.valor_residente AS valor, l.codigo AS lancamento,
	l.documento, l.vencimento AS venclimento_lanc, t.descricao AS tipo_conta,
	e.referencia AS ref_unidade, u.descricao AS unidade, u.codigo AS cod_unidade
FROM boleto AS b
LEFT JOIN fisica AS f ON(b.cod_pessoa = f.codigo)
LEFT JOIN juridica AS j ON(b.cod_pessoa = j.codigo)
INNER JOIN pessoa AS p ON(b.cod_pessoa = p.codigo)
INNER JOIN unidade AS u ON(p.cod_unidade = u.codigo)
INNER JOIN pessoa AS e ON(u.codigo = e.codigo)
INNER JOIN itens_boleto AS i ON(b.codigo = i.cod_boleto)
INNER JOIN lancamento AS l ON(i.cod_lancamento = l.codigo)
INNER JOIN tipo_conta as t ON(l.cod_conta = t.codigo)
WHERE (1 = 1)
ORDER BY u.codigo, b.vencimento DESC, b.codigo, l.codigo]]>
	</queryString>
	<field name="codigo" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="vencimento" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="emissao" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="nome" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="fantasia" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="status" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="valor" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="lancamento" class="java.lang.Integer">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="documento" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="venclimento_lanc" class="java.sql.Date">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="tipo_conta" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="ref_unidade" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="unidade" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="cod_unidade" class="java.lang.Integer"/>
	<group name="GRP_BOLETO">
		<groupExpression><![CDATA[$F{codigo}]]></groupExpression>
		<groupHeader>
			<band height="63">
				<textField>
					<reportElement x="77" y="0" width="45" height="14"/>
					<textElement/>
					<textFieldExpression class="java.lang.Integer"><![CDATA[$F{codigo}]]></textFieldExpression>
				</textField>
				<line>
					<reportElement x="0" y="14" width="555" height="1"/>
				</line>
				<staticText>
					<reportElement x="0" y="0" width="77" height="14"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Nosso Número:]]></text>
				</staticText>
				<staticText>
					<reportElement x="342" y="1" width="43" height="14"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Unidade:]]></text>
				</staticText>
				<textField>
					<reportElement x="385" y="1" width="170" height="14"/>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[$F{ref_unidade} + " - " + $F{unidade}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="122" y="0" width="47" height="14"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Emissão:]]></text>
				</staticText>
				<textField pattern="dd/MM/yyyy">
					<reportElement x="169" y="0" width="52" height="14"/>
					<textElement/>
					<textFieldExpression class="java.util.Date"><![CDATA[$F{emissao}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="1" y="16" width="46" height="13"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Cliente:]]></text>
				</staticText>
				<textField>
					<reportElement x="47" y="16" width="327" height="13"/>
					<textElement/>
					<textFieldExpression class="java.lang.String"><![CDATA[($F{nome} == null)? com.marcsoftware.Util.initCap($F{fantasia})
    : com.marcsoftware.Util.initCap($F{nome})]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="22" y="29" width="100" height="20"/>
					<textElement>
						<font size="13" isBold="true" isItalic="true" pdfFontName="Helvetica-BoldOblique"/>
					</textElement>
					<text><![CDATA[Lançamentos]]></text>
				</staticText>
				<line>
					<reportElement x="22" y="46" width="533" height="1"/>
				</line>
				<staticText>
					<reportElement x="22" y="48" width="55" height="13"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Código]]></text>
				</staticText>
				<staticText>
					<reportElement x="221" y="0" width="60" height="14"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Vencimento:]]></text>
				</staticText>
				<textField pattern="dd/MM/yyyy">
					<reportElement x="281" y="0" width="61" height="14"/>
					<textElement/>
					<textFieldExpression class="java.util.Date"><![CDATA[$F{vencimento}]]></textFieldExpression>
				</textField>
				<staticText>
					<reportElement x="77" y="48" width="171" height="13"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Tipo]]></text>
				</staticText>
				<staticText>
					<reportElement x="248" y="48" width="161" height="13"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Documento]]></text>
				</staticText>
				<staticText>
					<reportElement x="409" y="48" width="100" height="13"/>
					<textElement>
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Vencimento]]></text>
				</staticText>
				<line>
					<reportElement x="22" y="61" width="533" height="1"/>
				</line>
				<staticText>
					<reportElement x="409" y="29" width="46" height="13"/>
					<textElement textAlignment="Right">
						<font isBold="true" pdfFontName="Helvetica-Bold"/>
					</textElement>
					<text><![CDATA[Valor:]]></text>
				</staticText>
				<textField pattern="¤ #,##0.00">
					<reportElement x="455" y="29" width="100" height="13"/>
					<textElement textAlignment="Right"/>
					<textFieldExpression class="java.math.BigDecimal"><![CDATA[$F{valor}]]></textFieldExpression>
				</textField>
			</band>
		</groupHeader>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<pageHeader>
		<band height="64" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="0" width="555" height="61"/>
				<subreportParameter name="COD_UNIDADE">
					<subreportParameterExpression><![CDATA[$F{cod_unidade}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="CONTEXT_PATH">
					<subreportParameterExpression><![CDATA[$P{CONTEXT_PATH}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="TITLE">
					<subreportParameterExpression><![CDATA[$P{TITULO}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{CONEXAO_EXTERNA}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{CONTEXT_PATH}+ "comum/header.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</pageHeader>
	<detail>
		<band height="13" splitType="Stretch">
			<textField>
				<reportElement x="22" y="0" width="55" height="13"/>
				<textElement>
					<font isBold="false"/>
				</textElement>
				<textFieldExpression class="java.lang.Integer"><![CDATA[$F{lancamento}]]></textFieldExpression>
			</textField>
			<textField isBlankWhenNull="true">
				<reportElement x="248" y="0" width="161" height="13"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{documento}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="77" y="0" width="171" height="13"/>
				<textElement/>
				<textFieldExpression class="java.lang.String"><![CDATA[$F{tipo_conta}]]></textFieldExpression>
			</textField>
			<textField pattern="dd/MM/yyyy">
				<reportElement x="409" y="0" width="100" height="13"/>
				<textElement/>
				<textFieldExpression class="java.util.Date"><![CDATA[$F{venclimento_lanc}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<pageFooter>
		<band height="43" splitType="Stretch">
			<subreport>
				<reportElement x="0" y="0" width="555" height="42"/>
				<subreportParameter name="COD_UNIDADE">
					<subreportParameterExpression><![CDATA[$F{cod_unidade}]]></subreportParameterExpression>
				</subreportParameter>
				<subreportParameter name="CURRENT_PAGE">
					<subreportParameterExpression><![CDATA[$V{PAGE_NUMBER}]]></subreportParameterExpression>
				</subreportParameter>
				<connectionExpression><![CDATA[$P{CONEXAO_EXTERNA}]]></connectionExpression>
				<subreportExpression class="java.lang.String"><![CDATA[$P{CONTEXT_PATH} + "comum/footer.jasper"]]></subreportExpression>
			</subreport>
		</band>
	</pageFooter>
</jasperReport>
